# TCP, UDP

---

## 인터넷 프로토콜 스택의 4계층

| 애플리케이션 계층 | HTTP, FTP |
| :---: | :---: |
| **전송 계층** | **TCP, UDP** |
| **인터넷 계층** | **IP** |
| **네트워크 인터페이스 계층** | **랜카드 등** |

## 프로토콜 계층

1. SOCKET 라이브러리를 통해 전달
2. TCP 정보를 씌움
3. IP 데이터를 씌워 IP 패킷 생성

## IP 패킷 정보

\* 패킷 : 패키지 + 버킷의 합성어

- 출발지 IP, 목적지 IP, 기타..

## TCP/IP 패킷 정보

- IP 패킷 안에 TCP 정보가 들어감 (TCP 정보 안에 전송 데이터)
- TCP 정보
    - 출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증 정보

## TCP : 전송 제어 프로토콜

- 특징
    1. 연결지향 - TCP 3 way handshake ( 가상 연결 )
    연결을 하고 메세지를 보냄
    2. 데이터 전달 보증
    메세지 누락 시 알 수 있음
    3. 순서 보장
    - 신뢰할 수 있는 프로토콜
    - 현재는 대부분 TCP 사용

### 1. TCP 3 way handshake ( 가상 연결 )

1. 클라이언트에서 서버로 SYN 이라는 메세지 전달
2. 서버는 잘 받았다는 의미로 클라이언트에게 ACK라는 메세지 전달 + SYN 이라는 메세지 전달
3. 클라이언트에서는 알겠다는 의미로 서버에게 ACK 메세지 전달
4. 세 번 왔다갔다 한 후 연결 → 데이터 전송
- SYN : 접속 요청
- ACK : 요청 수락

### 2. 데이터 전달 보증

- 데이터를 전송하면 데이터를 잘 받았다고 보내줌

### 3. 순서 보장

- 패킷 순서가 잘못 오면 다시 보내라고 보내줌

## UDP : 사용자 데이터그램 프로토콜

- 특징
    - 하얀 도화지에 비유 (기능이 거의 없음)
    - 연결지향 - TCP 3 way handshake ❌
    - 데이터 전달 보증❌
    - 순서 보장❌
    - 데이터 전달 및 순서가 보장되지 않지만, **단순하고 빠름**
    
    ### 정리
    
    1. IP와 거의 유사 + PORT + 체크섬
        
        \*  PORT : 내 IP로 여러 패킷이 올때 각각 어떤 패킷인지 구분
        
        \* 체크섬 : 이 메세지에 대해서 제대로 맞는지 검증해주는 데이터
        
    2. 애플리케이션에서 추가 작업 필요
    3. HTTP3에서 UDP를 사용하면서 최신에 굉장히 뜨고 있음